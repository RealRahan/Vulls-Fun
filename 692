import discord
from discord.ext import commands
from disputils import BotEmbedPaginator, BotConfirmation, BotMultipleChoice
import random
import asyncio
import os
import requests

prefix="b "
intents = discord.Intents().all()
client=commands.Bot(command_prefix=prefix, intents=intents)
client.remove_command("help")

@client.event
async def on_ready():
	print(f"ØªÙ… ØªØ´ØºÙŠÙ„ Ø¨ÙˆØª {client.user.name} Ø¨Ù†Ø¬Ø§Ø­")
	activity = discord.Game(name=f"{prefix}help | ÙŠØ¯Ø¹Ù… Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„")
	await client.change_presence(status=discord.Status.dnd, activity=activity)

@client.command()
async def help(ctx):
 await ctx.reply("<a:loading:964951108353159249>", delete_after=3, mention_author=False)
 await asyncio.sleep(3)
 embeds = [
 discord.Embed(title="Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø¹Ø§Ù…Ø©", description=f"""**
{prefix}help `Ù‡Ø°Ø© Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©`
{prefix}ping `Ø³Ø±Ø¹Ø© Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ø¨ÙˆØª`
{prefix}server `Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø®Ø§Ø¯Ù…`
{prefix}user `Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…`
{prefix}perms `Ø±Ø¤ÙŠØ© ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ùˆ ØµÙ„Ø§Ø­ÙŠØ§ØªÙƒ`
{prefix}count `Ø¹Ø¯Ø§Ø¯ ÙˆÙ‚ØªØŒ Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙ†ØªÙ‡ÙŠ ÙŠÙ‚ÙˆÙ… Ø¨Ù…Ù†Ø´Ù†ØªÙƒ`
{prefix}ss `Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© Ù„Ø£ÙŠ Ù…ÙˆÙ‚Ø¹`
{prefix}lyrics `ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø§ØºÙ†ÙŠØ©`
{prefix}say `Ø§Ù„ØªÙƒÙ„Ù… Ø¨Ø§Ù„Ø¨ÙˆØª Ø¨Ø±ÙˆÙ… Ù…Ø®ØµØµ`
**"""),
 discord.Embed(title=f"Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø£Ø´Ø±Ø§ÙÙŠØ©", description="""**
{prefix}ban `Ø­Ø¸Ø± Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ± (Ù„Ø§ ØªØ¬Ø±Ø¨Ø© Ø¹Ù„Ù‰ Ù†ÙØ³Ùƒ!)`
Ù‚Ø±ÙŠØ¨Ø§ Ø§Ù„Ù…Ø²ÙŠØ¯.
**"""),
 discord.Embed(title="Ø§Ù„Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ù…Ù…ØªØ¹Ø©", description=f"""**
{prefix}meme `ØµÙˆØ± Ù…Ø¶Ø­ÙƒØ© Ù…Ø¹ ØªØ¹Ù„ÙŠÙ‚ Ù†ØµÙŠ`
{prefix}roll `Ø±Ù…ÙŠ Ø§Ù„Ù†Ø±Ø¯`
{prefix}simpcard `Ø¥Ø¹Ø·Ø§Ø¡ Ø´Ø®Øµ Ø¨Ø·Ø§Ù‚Ø© Ù…ØºÙÙ„`
{prefix}jail `Ø³Ø¬Ù† Ù…Ø³ØªØ®Ø¯Ù…`
**""")
]
 paginator = BotEmbedPaginator(ctx, embeds)
 await paginator.run()

@client.command()
@commands.guild_only()
async def ping(ctx):
  await ctx.send(f"**{round(client.latency * 1000)}Ù…ÙŠÙ„ÙŠ Ø«Ø§Ù†ÙŠØ©**")

@client.command()
@commands.guild_only()
async def server(ctx):
    embed = discord.Embed(title=f"{ctx.guild.name}")
    embed.add_field(name='ğŸ†”Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ Ù„Ù„Ø³ÙŠØ±ÙØ±', value=f"{ctx.guild.id}", inline=True)
    embed.add_field(name='ğŸ“†Ø§Ù†Ø´Ø¦ Ø¨ØªØ§Ø±ÙŠØ®', value=ctx.guild.created_at.strftime("%b %d %Y"), inline=True)
    embed.add_field(name='ğŸ‘‘Ø§Ù„Ù…Ø§Ù„Ùƒ', value=f"<@{ctx.guild.owner_id}>", inline=True)
    embed.add_field(name='ğŸ‘¥Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡', value=f'{ctx.guild.member_count} Ø¹Ø¶Ùˆ', inline=True)
    embed.add_field(name='ğŸ’¬Ø§Ù„Ø±ÙˆÙ…Ø§Øª', value=f'{len(ctx.guild.text_channels)} ÙƒØªØ§Ø¨ÙŠ | {len(ctx.guild.voice_channels)} ØµÙˆØªÙŠ', inline=True)
    embed.add_field(name='ğŸŒÙ…ÙˆÙ‚Ø¹ Ø§Ù„Ø§ØªØµØ§Ù„', value=f'{ctx.guild.region}', inline=True)
    embed.set_thumbnail(url=ctx.guild.icon_url)   
    embed.set_author(name=f'{ctx.author.name}', icon_url=ctx.message.author.avatar_url)
    await ctx.send(embed=embed)

@client.command()
@commands.guild_only()
async def user(ctx, user: discord.Member = None):
 if user == None:
 	user=ctx.author
 avatar = user.avatar_url_as(static_format="png")
 date = "%b %d %Y"
 roles = ' Ùˆ '.join([r.mention for r in user.roles][1:])
 msg=await ctx.send("**Ø§Ø®Ø° Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ | <a:loading:964951108353159249>**")
 await asyncio.sleep(0.30)
 await msg.edit(content="**Ø§Ø®Ø° ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø´Ø§Ø¡ | <a:loading:964951108353159249>**")
 await asyncio.sleep(0.30)
 await msg.edit(content="**Ø§Ø®Ø° ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¯Ø®ÙˆÙ„ | <a:loading:964951108353159249>**")
 await asyncio.sleep(0.30)
 await msg.edit(content="**Ø§Ø®Ø° Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø© | <a:loading:964951108353159249>**")
 await asyncio.sleep(0.30)
 await msg.edit(content="**Ø§Ø®Ø° Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø±ØªØ¨ | <a:loading:964951108353159249>**")
 await msg.delete()
 user=discord.Embed(title=f"{user.name}", description=f"""**
Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ: {user.id}
Ø§Ù†Ø´Ø¦ Ø¨ØªØ§Ø±ÙŠØ®: {user.created_at.strftime(date)}
Ø¯Ø®Ù„ {ctx.guild.name} Ø¨ØªØ§Ø±ÙŠØ®: {user.joined_at.strftime(date)}
Ø§Ù„Ø­Ø§Ù„Ø©: {user.status}
Ø§Ù„Ø±ØªØ¨: {roles}
**""", color=user.color)
 user.set_thumbnail(url=avatar)
 user.set_footer(text=f"Ø¨Ø·Ù„Ø¨ Ù…Ù†: {ctx.author} | {prefix}perms Ù„Ø±Ø¤ÙŠØ© ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…")
 await ctx.send(embed=user)

@client.command()
@commands.guild_only()
async def perms(ctx, user: discord.Member=None):
  if user == None:
  	user=ctx.author
  perms = '\n'.join([str(p[0]).replace("_", " ").title() for p in user.guild_permissions if p[1]])
  perm=discord.Embed(description=f"**{perms}**")
  await ctx.send(embed=perm)

@client.command()
@commands.guild_only()
@commands.has_permissions(ban_members=True)
async def ban(ctx, member: discord.Member = None,*, reason="Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¨Ø¨"):
 if member == None:
  nomention=discord.Embed(title="Ø®Ø·Ø£", description="**Ù†Ø³ÙŠØª Ø°ÙƒØ± Ø£Ùˆ ÙˆØ¶Ø¹ Ù…Ø¹Ø±Ù Ø£Ùˆ ÙˆØ¶Ø¹ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ø§Ù„Ø­Ø¸Ø±**", color=discord.Color.red())
  await ctx.send(embed=nomention)
 confirmation = BotConfirmation(ctx)
 await confirmation.confirm(f"**Ù‡Ù„ Ø§Ù†Øª Ù…ØªØ£ÙƒØ¯ØŒ Ø³ØªÙ‚ÙˆÙ… Ø¨Ø­Ø¸Ø± {member.name} Ù…Ù† Ø§Ù„Ø³ÙŠØ±ÙØ±.**")
 if confirmation.confirmed:
  await member.ban(reason=reason)
  await confirmation.update(f"**ØªÙ… Ø­Ø¸Ø± {member} Ø¨Ù†Ø¬Ø§Ø­ Ù…Ù† {ctx.guild.name}**", hide_author=True)
  await ctx.send(embed=ban)
  sendmsg=discord.Embed(title="Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ø­Ø¸Ø±", description=f"**Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ø­Ø¸Ø± Ù…Ù† {ctx.guild.name} Ø¨ÙˆØ§Ø³Ø·Ø© {ctx.author.name} Ø­Ø³Ø¨ Ø§Ù„Ø³Ø¨Ø¨: {reason}\nØ§Ø°Ø§ ÙƒØ§Ù† Ø³ÙˆØ¡ ØªÙØ§Ù‡Ù… Ù ØªØ­Ø¯Ø« Ù…Ø¹Ø©: {ctx.author}**")
  await member.send(embed=sendmsg)
 else:
  await confirmation.update("**ØªÙ… Ø§Ù„Ø£Ù„ØºØ§Ø¡**", hide_author=True)
 
@client.command()
@commands.guild_only()
async def roll(ctx):
  await ctx.send(f"**{random.randint(1,100)}**")

@client.command()
@commands.guild_only()
async def count(ctx, t:int):
    message=await ctx.send(f"**{t}**")
    while t > 0:
        t -=1
        await message.edit(content=f"**{t}**")
        await asyncio.sleep(1)
    await message.edit(content=f"**Ø§Ù†ØªÙ‡Ù‰ Ø¨ÙˆØ§Ø³Ø·Ø© {ctx.author.name}**")
    mention=await ctx.send(ctx.author.mention)
    await mention.delete()

@client.command()
@commands.guild_only()
async def ss(ctx, site):
 width = 1280
 crop = 720
 os.system(f"wget -O screenshot.png https://image.thum.io/get/width/{width}/crop/{crop}/https://{site}")
 await ctx.reply(f"**{width}x{crop}**", file=discord.File("screenshot.png"), mention_author=False)
 os.system("rm -rf screenshot.png")

@client.command()
@commands.guild_only()
async def meme(ctx):
 r=requests.get("https://meme-api.herokuapp.com/gimme/armeme")
 os.system(f"wget -O meme.png {r.json()['url']}")
 await ctx.send(f"{r.json()['title']}, Ups: ({r.json()['ups']})", file=discord.File("meme.png"))
 os.system("rm -rf meme.png")

@client.command()
@commands.guild_only()
async def simpcard(ctx, member: discord.Member=None):
 if member == None:
  member=ctx.author
 avatar = member.avatar_url_as(static_format="png")
 os.system(f"wget -O simpcard.png https://some-random-api.ml/canvas/simpcard/?avatar={avatar}")
 await ctx.reply(file=discord.File("simpcard.png"), mention_author=False)
 os.system("rm -rf simpcard.png")

@client.command()
@commands.guild_only()
async def jail(ctx, member: discord.Member=None):
 if member == None:
  member=ctx.author
 avatar = member.avatar_url_as(static_format="png")
 os.system(f"wget -O jail.png https://some-random-api.ml/canvas/jail/?avatar={avatar}")
 await ctx.reply(file=discord.File("jail.png"), mention_author=False)
 os.system("rm -rf jail.png")

@client.command()
async def lyrics(ctx,*, arg):
 r=requests.get(f"https://some-random-api.ml/lyrics/?title={arg}")
 if not r.status_code == 200:
 	await ctx.send(f"**Ù„Ø§ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø§ØºÙ†ÙŠØ©: {arg}**")
 if len(r.json()["lyrics"]) > 4096:
 	await ctx.send(f"**Ø§Ù„Ø£ØºÙ†ÙŠØ© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ {len(r.json()['lyrics'])} Ø­Ø±Ù Ù…Ù† Ø£ØµÙ„ 4096 ÙˆÙ‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ù„Ù„Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯.**")
 	return
 confirmation = BotConfirmation(ctx)
 ask=await confirmation.confirm(f"**Ù‡Ù„ Ø§Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø°Ù„ÙƒØŸ ØŒ Ø§Ù„Ø£ØºÙ†ÙŠØ© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ {len(r.json()['lyrics'])} Ø­Ø±Ù Ùˆ Ù‚Ø¯ ÙŠØ­Ø¯Ø« Ø§Ø²Ø¹Ø§Ø¬ ÙÙŠ Ø±ÙˆÙ… {ctx.channel.name}**")
 if confirmation.confirmed:
  await confirmation.update("**Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙ„Ù…Ø§Øª ...**", hide_author=True)
  l=discord.Embed(title=f"{r.json()['title']} ({r.json()['author']})", description=f"**{r.json()['lyrics']}**", color=ctx.author.color)
  l.set_thumbnail(url=r.json()['thumbnail']['genius'])
  await ctx.send(embed=l)
 else:
  await confirmation.update("**ØªÙ… Ø§Ù„Ø£Ù„ØºØ§Ø¡**", hide_author=True)

@client.command()
@commands.guild_only()
@commands.has_permissions(manage_messages=True)
async def say(ctx,*, arg=None):
 if arg == None:
  await ctx.send("**Ø§ÙƒØªØ¨ Ù†Øµ.**")
 await ctx.channel.purge(limit=1)
 await ctx.send(arg)

client.run("OTQ0ODU0MTY5MTQ2MjQ5MjU3.YhHqBA.nYv99h69A9y4G7TDjUNxL32rs04")